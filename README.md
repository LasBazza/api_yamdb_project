# API YaMDb
REST API для сервиса YaMDb — базы данных произведений исскуства (книги, фильмы, музыка) с возможностью писать отзывы и комментарии к отзывам. (Коллективный проект 3 студентов Яндекс.Практикум)


## Описание

API для сервиса YaMDb.

Позволяет работать со следующими сущностями:

* Пользователи 
* Произведения
* Категории (типы) произведений
* Жанры
* Отзывы 
* Коментарии к отзывам

## Запуск проекта и регистрация

**1. Склонировать резпозиторий**
```
git clone https://github.com/LasBazza/api_yamdb_project.git
```

**2. В корневой папке проекта создать файл ```.env```, содержащий следующие переменные окружения:**
```
SECRET_KEY=your_django_secret_key
DB_ENGINE=django.db.backends.postgresql
DB_NAME=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_password
DB_HOST=db
DB_PORT=5432
```

**3. Из папки с проектом выполнить команду:**

```
docker-compose up
```

Документация к API с описанием эндпоинтов доступна на ```http://127.0.0.1/redoc```.
Корневой адрес API ```http://127.0.0.1/api/v1/```.

## Процесс регистрации

1. Пользователь отправляет ```POST``` запрос с параметром ```email``` на ```http://127.0.0.1/api/v1/auth/email/```.
2. Затем сервис должен отправить письмо с кодом подтверждения на адрес email. Но в действительности письмо сохраняется в контейнере с проектом в папке ```sent_emails/```. 

Зайти в терминал внутри контейнер можно, выполнив команду:

```
docker-compose exec web bash
```

Вы окажитесь в корневой папке проекта. Далее нужно перейти в папку ```sent_emails/``` и найти там Ваше письмо.

3. Пользователь отправляет запрос с параметрами ```email``` и ```confirmation_code``` на ```http://127.0.0.1/api/v1/auth/token/```, в ответе на запрос ему приходит токен (JWT-токен).

Процесс регистрации также описан в документации (```http://127.0.0.1/redoc```)

## Регистрация администратора

Сперва необходимо создать суперпользователя

```
docker-compose exec web python manage.py createsuperuser
```

После этого выполнить шаги из предыдущего пункта с электронным адресом, указанным при создании суперпользователя.

## Участники 
[Sgonchar89](https://github.com/Sgonchar89) - отзывы (Review) и комментарии (Comment): модели и view, эндпойнты, права доступа для запросов. Рейтинги произведений.

[UlianaVo](https://github.com/UlianaVo) - категории (Category), жанры (Genre) и произведения (Title): модели, view и эндпойнты для них.

[LasBazza](https://github.com/LasBazza) - система регистрации и аутентификации, управление пользователями (Auth и Users), права доступа, работа с токеном, система подтверждения e-mail.

## Статус workflow
![yamdb workflow](https://github.com/LasBazza/api_yamdb_project/actions/workflows/yamdb_workflow.yml/badge.svg)
